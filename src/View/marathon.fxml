<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.shape.*?>
<?import javafx.scene.image.Image?>
<?import javafx.scene.image.ImageView?>

<BorderPane xmlns:fx="http://javafx.com/fxml"
            fx:controller="Controller.MarathonController">

    <!-- CENTER: Title + race area -->
    <center>
        <VBox alignment="CENTER" spacing="15">
            <Label text="Marathon Simulator"
                   style="-fx-font-size: 24px; -fx-font-weight: bold;" />

            <AnchorPane fx:id="racePane"
                        prefWidth="800" prefHeight="300"
                        style="-fx-border-color: black; -fx-border-width: 2;
                               -fx-background-color: #f5f5f5;">

                <children>

                    <!-- Track background -->
                    <Rectangle x="20" y="20" width="760" height="260"
                               fill="white"
                               stroke="black"
                               strokeWidth="1.5" />

                    <!-- Green start strip -->
                    <Rectangle x="20" y="20" width="30" height="260"
                               fill="#2ecc71" />

                    <!-- Lane lines -->
                    <Line startX="50" startY="80" endX="780" endY="80" stroke="black"/>
                    <Line startX="50" startY="140" endX="780" endY="140" stroke="black"/>
                    <Line startX="50" startY="200" endX="780" endY="200" stroke="black"/>

                    <!-- Temporary finish line -->
                    <Line startX="730" startY="20" endX="730" endY="280"
                          stroke="black" strokeWidth="2" />


                    <!-- =================================================== -->
                    <!-- Runners (PNG body + GIF legs in StackPane)         -->
                    <!-- =================================================== -->

                    <!-- Runner 1 -->
                    <StackPane fx:id="runner1Pane"
                               layoutX="70" layoutY="10">

                        <children>

                            <ImageView fx:id="runner1Gif"
                                       fitWidth="55" fitHeight="75"
                                       preserveRatio="true"
                                       translateY="12">
                                <image>
                                    <Image url="@/Images/stickman-running.gif"/>
                                </image>
                            </ImageView>

                            <ImageView fx:id="runner1Body"
                                       fitWidth="45" fitHeight="70"
                                       preserveRatio="true"
                                       translateY="-8">
                                <image>
                                    <Image url="@/Images/runner1.png"/>
                                </image>
                            </ImageView>

                        </children>
                    </StackPane>


                    <!-- Runner 2 -->
                    <StackPane fx:id="runner2Pane"
                               layoutX="70" layoutY="70">

                        <children>

                            <ImageView fx:id="runner2Gif"
                                       fitWidth="55" fitHeight="75"
                                       preserveRatio="true"
                                       translateY="12">
                                <image>
                                    <Image url="@/Images/stickman-running.gif"/>
                                </image>
                            </ImageView>

                            <ImageView fx:id="runner2Body"
                                       fitWidth="45" fitHeight="70"
                                       preserveRatio="true"
                                       translateY="-8">
                                <image>
                                    <Image url="@/Images/runner2.png"/>
                                </image>
                            </ImageView>

                        </children>
                    </StackPane>


                    <!-- Runner 3 -->
                    <StackPane fx:id="runner3Pane"
                               layoutX="70" layoutY="130">

                        <children>

                            <ImageView fx:id="runner3Gif"
                                       fitWidth="55" fitHeight="75"
                                       preserveRatio="true"
                                       translateY="12">
                                <image>
                                    <Image url="@/Images/stickman-running.gif"/>
                                </image>
                            </ImageView>

                            <ImageView fx:id="runner3Body"
                                       fitWidth="45" fitHeight="70"
                                       preserveRatio="true"
                                       translateY="-8">
                                <image>
                                    <Image url="@/Images/runner3.png"/>
                                </image>
                            </ImageView>

                        </children>
                    </StackPane>


                    <!-- Runner 4 -->
                    <StackPane fx:id="runner4Pane"
                               layoutX="70" layoutY="190">

                        <children>

                            <ImageView fx:id="runner4Gif"
                                       fitWidth="55" fitHeight="75"
                                       preserveRatio="true"
                                       translateY="12">
                                <image>
                                    <Image url="@/Images/stickman-running.gif"/>
                                </image>
                            </ImageView>

                            <ImageView fx:id="runner4Body"
                                       fitWidth="45" fitHeight="70"
                                       preserveRatio="true"
                                       translateY="-8">
                                <image>
                                    <Image url="@/Images/runner4.png"/>
                                </image>
                            </ImageView>

                        </children>
                    </StackPane>

                </children>
            </AnchorPane>
        </VBox>
    </center>


    <!-- BOTTOM PANEL -->
    <bottom>
        <BorderPane prefHeight="150">

            <left>
                <HBox spacing="10" alignment="CENTER_LEFT" style="-fx-padding: 10;">
                    <children>
                        <Button fx:id="startButton" text="Start" onAction="#handleStart"/>
                        <Button fx:id="pauseButton" text="Pause" onAction="#handlePause"/>
                        <Button fx:id="resetButton" text="Reset" onAction="#handleReset"/>
                        <Button fx:id="exitButton" text="Exit" onAction="#handleExit"/>
                    </children>
                </HBox>
            </left>

            <center>
                <VBox spacing="5" style="-fx-padding: 10;">
                    <children>
                        <Label fx:id="messageLabel"
                               text="Marathon Status"
                               style="-fx-font-weight: bold;"/>
                        <TextArea fx:id="messageArea"
                                  prefRowCount="3" wrapText="true"
                                  editable="false"/>
                    </children>
                </VBox>
            </center>

        </BorderPane>
    </bottom>

</BorderPane>
